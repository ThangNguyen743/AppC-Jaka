<Window x:Class="JAKA_APP.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="JAKA Control"
        MinWidth="1000"
        MinHeight="750"
        WindowStartupLocation="CenterScreen"
        Background="#f0f2f5">

    <Window.Resources>
        <DropShadowEffect x:Key="DropShadowEffect" ShadowDepth="3" BlurRadius="5" Color="#888"/>

        <Style x:Key="ModernButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#0078D7"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Padding" Value="6,3"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="6">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#005A9E"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#004578"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style TargetType="TextBox" x:Key="InputBox">
            <Setter Property="Margin" Value="3"/>
            <Setter Property="Padding" Value="4,2"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Width" Value="80"/>
        </Style>
    </Window.Resources>

    <Grid x:Name="RootGrid" Margin="15">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Background="White" CornerRadius="8" Padding="10" Margin="0,0,0,10" Effect="{StaticResource DropShadowEffect}">
            <WrapPanel HorizontalAlignment="Center">
                <TextBlock Text="Robot IP:" VerticalAlignment="Center" FontWeight="SemiBold" Margin="5,0"/>
                <TextBox x:Name="txtRobotIp" Width="160" Margin="5,0" Style="{StaticResource InputBox}"/>
                <Button x:Name="btnConnect" Content="Connect" Style="{StaticResource ModernButtonStyle}" Click="Connect_Click"/>
                <Button x:Name="btnPowerOn" Content="Power On" Style="{StaticResource ModernButtonStyle}" Click="PowerOn_Click"/>
                <Button x:Name="btnEnable" Content="Enable" Style="{StaticResource ModernButtonStyle}" Click="Enable_Click"/>
                <Button x:Name="btnDisable" Content="Disable" Style="{StaticResource ModernButtonStyle}" Click="Disable_Click"/>
                <Button x:Name="btnPowerOff" Content="Power Off" Style="{StaticResource ModernButtonStyle}" Click="PowerOff_Click"/>
                <Button x:Name="btnTheme" Content="🌙 Dark Mode" Style="{StaticResource ModernButtonStyle}" Click="ThemeToggle_Click"/>
            </WrapPanel>
        </Border>

        <!-- Main -->
        <ScrollViewer Grid.Row="1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2*"/>
                    <ColumnDefinition Width="3*"/>
                </Grid.ColumnDefinitions>

                <!-- Joint Control -->
                <Border Grid.Column="0" Background="White" CornerRadius="8" Padding="15" Effect="{StaticResource DropShadowEffect}">
                    <StackPanel>
                        <TextBlock Text="Move Joint" FontWeight="Bold" FontSize="16" Margin="0,0,0,10"/>
                        <UniformGrid Columns="3" Rows="6">
                            <TextBlock Text="&#x9;J1"/>
                            <TextBox x:Name="txtJ1" Style="{StaticResource InputBox}" GotFocus="JointTextBox_GotFocus" LostFocus="JointTextBox_LostFocus"/>
                            <Button x:Name="btnJ1" Tag="1" Content="Move" Style="{StaticResource ModernButtonStyle}" Click="MoveJoint_Click"/>

                            <TextBlock Text="&#x9;J2"/>
                            <TextBox x:Name="txtJ2" Style="{StaticResource InputBox}" GotFocus="JointTextBox_GotFocus" LostFocus="JointTextBox_LostFocus"/>
                            <Button x:Name="btnJ2" Tag="2" Content="Move" Style="{StaticResource ModernButtonStyle}" Click="MoveJoint_Click"/>

                            <TextBlock Text="&#x9;J3"/>
                            <TextBox x:Name="txtJ3" Style="{StaticResource InputBox}" GotFocus="JointTextBox_GotFocus" LostFocus="JointTextBox_LostFocus"/>
                            <Button x:Name="btnJ3" Tag="3" Content="Move" Style="{StaticResource ModernButtonStyle}" Click="MoveJoint_Click"/>

                            <TextBlock Text="&#x9;J4"/>
                            <TextBox x:Name="txtJ4" Style="{StaticResource InputBox}" GotFocus="JointTextBox_GotFocus" LostFocus="JointTextBox_LostFocus"/>
                            <Button x:Name="btnJ4" Tag="4" Content="Move" Style="{StaticResource ModernButtonStyle}" Click="MoveJoint_Click"/>

                            <TextBlock Text="&#x9;J5"/>
                            <TextBox x:Name="txtJ5" Style="{StaticResource InputBox}" GotFocus="JointTextBox_GotFocus" LostFocus="JointTextBox_LostFocus"/>
                            <Button x:Name="btnJ5" Tag="5" Content="Move" Style="{StaticResource ModernButtonStyle}" Click="MoveJoint_Click"/>

                            <TextBlock Text="&#x9;J6"/>
                            <TextBox x:Name="txtJ6" Style="{StaticResource InputBox}" GotFocus="JointTextBox_GotFocus" LostFocus="JointTextBox_LostFocus"/>
                            <Button x:Name="btnJ6" Tag="6" Content="Move" Style="{StaticResource ModernButtonStyle}" Click="MoveJoint_Click"/>
                        </UniformGrid>

                        <WrapPanel HorizontalAlignment="Center">
                            <Button x:Name="btnMoveAll" Content="Move All" Style="{StaticResource ModernButtonStyle}" Click="MoveAllJoints_Click"/>
                            <Button x:Name="btnMoveHome" Content="Home" Style="{StaticResource ModernButtonStyle}" Click="MoveHome_Click"/>
                        </WrapPanel>
                        <Grid Margin="10" HorizontalAlignment="Center">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="220"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <TextBlock Text="Speed:" Grid.Column="0" VerticalAlignment="Center" Margin="5,0"/>
                            <Slider x:Name="sldSpeed" Minimum="5" Maximum="100" Value="20"
            Width="200" Grid.Column="1" VerticalAlignment="Center"
            ValueChanged="Slider_ValueChanged"/>
                            <Label x:Name="lblSpeed" Content="20%" Grid.Column="2"
           VerticalAlignment="Center" Margin="10,0,0,0"/>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- Teach & Playback + Cartesian -->
                <StackPanel Grid.Column="1" Margin="20,0,0,0">
                    <Border Background="White" CornerRadius="8" Padding="15" Effect="{StaticResource DropShadowEffect}">
                        <StackPanel>
                            <TextBlock Text="Teach &amp; Playback" FontWeight="Bold" FontSize="16" Margin="0,0,0,10"/>

                            <!-- Hàng trên: Delay, Name, Record -->
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Delay (s):" VerticalAlignment="Center"/>
                                <TextBox x:Name="txtDelay" Width="60" Style="{StaticResource InputBox}"/>
                                <TextBlock Text="Name:" VerticalAlignment="Center" Margin="10,0,0,0"/>
                                <TextBox x:Name="txtPointName" Width="120" Style="{StaticResource InputBox}"/>
                                <Button x:Name="btnRecordAdv" Content="Record Joint" Width="120" Style="{StaticResource ModernButtonStyle}" Click="RecordPointAdv_Click"/>
                            </StackPanel>

                            <ListBox x:Name="lstPointsAdv" Height="190" Margin="0,5"/>

                            <!-- Đưa Loops lên trên -->
                            <StackPanel Orientation="Horizontal" Margin="5" HorizontalAlignment="Center">
                                <TextBlock Text="Loops:" VerticalAlignment="Center"/>
                                <TextBox x:Name="txtLoopCount" Width="60" Margin="5,0" Text="1" Style="{StaticResource InputBox}"/>
                                <CheckBox x:Name="chkLoopInfinite" Content="Infinite" VerticalAlignment="Center" Margin="5,0"/>
                            </StackPanel>

                            <!-- Sau đó mới tới Run / Pause / Resume -->
                            <WrapPanel HorizontalAlignment="Center" Margin="0,5,0,0">
                                <Button x:Name="btnRunAdv" Content="▶ Run" Width="100" Style="{StaticResource ModernButtonStyle}" Click="RunSequenceAdv_Click"/>
                                <Button x:Name="btnPause" Content="⏸ Pause" Width="100" Style="{StaticResource ModernButtonStyle}" Click="PauseSequence_Click"/>
                                <Button x:Name="btnResume" Content="▶ Resume" Width="100" Style="{StaticResource ModernButtonStyle}" Click="ResumeSequence_Click"/>
                            </WrapPanel>

                            <WrapPanel HorizontalAlignment="Center">
                                <Button x:Name="btnSaveAdv" Content="💾 Save" Width="100" Style="{StaticResource ModernButtonStyle}" Click="SavePointsAdv_Click"/>
                                <Button x:Name="btnLoadAdv" Content="📂 Load" Width="100" Style="{StaticResource ModernButtonStyle}" Click="LoadPointsAdv_Click"/>
                                <Button x:Name="btnClearAdv" Content="🗑 Clear" Width="100" Style="{StaticResource ModernButtonStyle}" Click="ClearPointsAdv_Click"/>
                            </WrapPanel>
                        </StackPanel>
                    </Border>

                    <Border Background="White" CornerRadius="8" Padding="15" Margin="0,15,0,0" Effect="{StaticResource DropShadowEffect}">
                        <StackPanel>
                            <TextBlock Text="Cartesian Control (TCP Pose)" FontWeight="Bold" FontSize="16" Margin="0,0,0,10"/>

                            <Grid Margin="80,0,0,10">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="100"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="100"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="100"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <!-- Hàng 1: X, Y, Z -->
                                <TextBlock Text="X" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center" Margin="5,0"/>
                                <TextBox x:Name="txtX" Style="{StaticResource InputBox}" Grid.Row="0" Grid.Column="1"/>

                                <TextBlock Text="Y" Grid.Row="0" Grid.Column="2" VerticalAlignment="Center" Margin="5,0"/>
                                <TextBox x:Name="txtY" Style="{StaticResource InputBox}" Grid.Row="0" Grid.Column="3"/>

                                <TextBlock Text="Z" Grid.Row="0" Grid.Column="4" VerticalAlignment="Center" Margin="5,0"/>
                                <TextBox x:Name="txtZ" Style="{StaticResource InputBox}" Grid.Row="0" Grid.Column="5"/>

                                <!-- Hàng 2: RX, RY, RZ -->
                                <TextBlock Text="RX" Grid.Row="1" Grid.Column="0" VerticalAlignment="Center" Margin="5,0"/>
                                <TextBox x:Name="txtRX" Style="{StaticResource InputBox}" Grid.Row="1" Grid.Column="1"/>

                                <TextBlock Text="RY" Grid.Row="1" Grid.Column="2" VerticalAlignment="Center" Margin="5,0"/>
                                <TextBox x:Name="txtRY" Style="{StaticResource InputBox}" Grid.Row="1" Grid.Column="3"/>

                                <TextBlock Text="RZ" Grid.Row="1" Grid.Column="4" VerticalAlignment="Center" Margin="5,0"/>
                                <TextBox x:Name="txtRZ" Style="{StaticResource InputBox}" Grid.Row="1" Grid.Column="5"/>
                            </Grid>

                            <!-- Nút -->
                            <WrapPanel HorizontalAlignment="Center">
                                <Button x:Name="btnGetPose" Content="📡 Get Pose" Style="{StaticResource ModernButtonStyle}" Click="GetPose_Click"/>
                                <Button x:Name="btnMovePose" Content="🚀 Move Pose" Style="{StaticResource ModernButtonStyle}" Click="MovePose_Click"/>
                            </WrapPanel>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Grid>
        </ScrollViewer>

        <!-- Log -->
        <GroupBox Grid.Row="2" Header="Status Log" Margin="5">
            <ScrollViewer Height="200">
                <TextBox x:Name="txtLog" IsReadOnly="True" FontFamily="Consolas" FontSize="12" TextWrapping="Wrap" AcceptsReturn="True"/>
            </ScrollViewer>
        </GroupBox>
    </Grid>
</Window>
